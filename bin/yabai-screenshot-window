#!/usr/bin/env zsh

if [ -z "$1" ]; then
  id="$(yabai -m query --windows | jq 'map(select(."focused" == 1))[].id')"
else
  id="$1"
fi

IFS=$'\n' read -d '' -r -A windowData  <<< "$(yabai -m query --windows | jq 'map(select(."id" == '$id'))[] | .frame.x, .frame.y, .frame.w, .frame.h, .display')"

display=$windowData[5]


frameData="${windowData[1]},${windowData[2]},${windowData[3]},${windowData[4]}"

screencapture -c -u -x -tPNG -R${frameData} -D${display}
