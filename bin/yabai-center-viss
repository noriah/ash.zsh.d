#!/usr/bin/env zsh

IFS=$'\n' read -d '' -r -A windowData  <<< "$(yabai -m query --windows | jq 'map(select(."title" == "viss"))[] | .id, .frame.x, .frame.y, .frame.w, .frame.h, .display')"
wid=${windowData[1]}
wx=${windowData[2]}
wy=${windowData[3]}
ww=${windowData[4]}
wh=${windowData[5]}
wd=${windowData[6]}

IFS=$'\n' read -d '' -r -A displayData  <<< "$(yabai -m query --displays | jq 'map(select(."index" == 1))[].frame | .w, .h')"
dw=${displayData[1]}
dh=${displayData[2]}

height=2080

let "centerPoint = (dw / 2) - (ww / 2)"
let "centerHeight = height - (wh / 2)"

yabai -m window $wid --move abs:$centerPoint:$centerHeight
